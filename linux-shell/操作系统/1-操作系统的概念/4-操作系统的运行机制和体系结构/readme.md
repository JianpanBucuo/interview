# OS 的运行机制和体系结构

## 运行机制

`指令` 和 我们平常的`代码`有什么区别?
C 语言代码 -> 通过翻译 -> 机器语言指令
`（一条高级语言代码翻译过来可能会对应多条指令）`
指令： CPU（处理器） 可以识别和执行的最基本的命令

### 两种指令

有的指令人畜无害，比如 加减乘除这种普通的运算指令

有的指令有很高的权限,比如 内存清零，如果用户可以使用这个指令，就意味着一个用户可以让其他用户的内存数据随意清零，这显然是很危险的，影响到系统的安全性

- 特权指令
  `不允许普通用户程序使用`
- 非特权指令

### 两种处理器状态

问题：CPU 如何判断当前是否可以执行特权指令？

- 核心态（管态）- `CPU可以执行特权指令`
- 用户态（目态）- `CPU只能执行非特权指令`

CPU 的两种状态是用`程序状态寄存器（PSW）`中的某标识位来标识当前处理器处于哪种状态（0：用户态， 1： 核心态）

### 两种程序

- 内核程序
  `系统资源的管理者，既可以执行特权指令，也可以执行非特权指令，运行在核心态`
- 应用程序
  `只能执行非特权指令，运行在用户态`

## 操作系统内核

操作系统层次结构由 内核功能，非内核功能组成

内核功能- 接近硬件

问题：操作系统的哪些功能由内核程序实现呢？

- 时钟管理
- 中断处理
- 原语

`内核是计算上配置的底层软件，是操作系统最基本，最核心的部分。`

`实现操作系统内核功能的那些程序就是内核程序`

### 时钟管理

实现计时功能

### 中断处理

### 原语

一种特殊的程序，是最接近硬件的部分，这种程序的运行具有原子性

### 对系统资源进行管理的功能

- 进程管理
- 存储器管理
- 设备管理

## 操作系统的体系结构

如图

### 大内核

### 微内核
