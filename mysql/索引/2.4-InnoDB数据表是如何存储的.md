# InnoDB 数据表是如何存储的（偏向物理结构，在磁盘上的存储方式）

- 表空间（Idb 文件） tablespace
- 段 Segment
- 区 extent (64 个 page)
- 页 page （B+树的一个节点）
- 行 row

## 表空间 (多个 Idb 文件)

- 表空间指的是数据表在硬盘上的存储空间
- 默认，所有的表的数据都存在`共享表空间`
- 每个表的数据也可以放在`独占表空间`

## 段 Segment

分为以下三种段

Leaf node segment 数据段
Non Leaf node segment 索引段（非叶子节点）
Rollback segment

- 段由数据引擎自动管理

## 区 extent 1MB (16 \* 64)

一个页默认 16kb
64 个 page

- 区是由连续`页`组成的空间 一般为 1MB
- 一次从磁盘申请 4~5 个区
- 一般来讲含有 64 个页

## 页 page （1 个 B+树的节点）

上限指针 / 下限指针 / 一行一行的数据 组成

- 页是 InnoDB 中磁盘读写的最小逻辑单位
- 一个数据页就是一个 B+树的节点
- 页的大小充分考虑了机械硬盘和 SSD 的最小单位 （512B 和 4kb）

- 为什么不能过大？
  链表查找效率低
  磁盘读写压力大

- 为什么不能太小？
  机械硬盘和 SSD 的最小单位 （512B 和 4kb）

## 行

数据真正存储的地方
